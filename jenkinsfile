pipeline {
    agent any
     stages {
        stage('terraform init'){
            steps{
                sh "terraform init"
            }
        }
        stage('terraform plan'){
            steps{
                sh "terraform plan"
            }
        }
         stage('Approval') {
         steps {
          script {
            def userInput = input(id: 'confirm', message: 'Apply Terraform?', parameters: [ [$class: 'BooleanParameterDefinition', defaultValue: false, description: 'Apply terraform', name: 'confirm'] ])
              }
            }
           }        
        stage('terraform apply'){
            steps{
            sh returnStatus: true, script: 'terraform apply -auto-approve'
            }
         }
        stage('apply') {
            steps {
                echo 'deployed....'
            }
        }
    }
}
